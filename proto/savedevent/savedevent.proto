syntax = "proto3";

package savedevent;

import "google/api/annotations.proto";

option go_package = "proto/savedevent";

message SavedEvent {
  string user_id = 1;
  int32 event_id = 2;
  string created_at = 3;
}

message SaveEventRequest {
  string user_id = 1;
  int32 event_id = 2;
}

message SaveEventResponse {
  SavedEvent saved_event = 1;
}

message FindSavedEventRequest {
  string user_id = 1;
  int32 event_id = 2;
}

message FindSavedEventResponse {
  SavedEvent saved_event = 1;
}

message FindAllByUserRequest {
  string user_id = 1;
}

message FindAllByUserResponse {
  repeated SavedEvent saved_events = 1;
}

message FindAllByEventRequest {
  int32 event_id = 1;
}

message FindAllByEventResponse {
  repeated SavedEvent saved_events = 1;
}

message DeleteSavedEventRequest {
  string user_id = 1;
  int32 event_id = 2;
}

message DeleteSavedEventResponse {
  string message = 1;
}

service SavedEventService {
  rpc SaveEvent(SaveEventRequest) returns (SaveEventResponse){
    option (google.api.http) = {
      post: "/api/v1/savedEvents"
      body: "*"
    };
  }
  rpc FindSavedEvent(FindSavedEventRequest) returns (FindSavedEventResponse){
    option (google.api.http) = {
      get: "/api/v1/savedEvents/{user_id}/{event_id}"
    };
  }
  rpc FindAllByUser(FindAllByUserRequest) returns (FindAllByUserResponse){
    option (google.api.http) = {
      get: "/api/v1/savedEvents/user/{user_id}"
    };
  }
  rpc FindAllByEvent(FindAllByEventRequest) returns (FindAllByEventResponse){
    option (google.api.http) = {
      get: "/api/v1/savedEvents/event/{event_id}"
    };
  }
  rpc DeleteSavedEvent(DeleteSavedEventRequest) returns (DeleteSavedEventResponse){
    option (google.api.http) = {
      delete: "/api/v1/savedEvents/{user_id}/{event_id}"
    };
  }
}